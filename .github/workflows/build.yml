name: Garmin CIQ Buildon:push:branches:- mainpull_request:branches:- mainjobs:build_and_test:runs-on: ubuntu-latestcontainer:# Use the specific Docker image that contains the Garmin Connect IQ SDK and tools.# This handles all the dependencies and environment setup.image: ghcr.io/blackshadev/garmin-connectiq-tools:8.2.3-2steps:
  - name: Checkout repository
    uses: actions/checkout@v4
    with:
      # This is important for CI/CD to make sure the workspace is clean.
      submodules: true

  - name: Build project
    # Assuming your project has a source/ directory, this command will
    # compile the Monkey C code. Adjust the path and command as needed.
    run: monkeyc -f source/buzz.jungle -y buzz.der

  - name: Run tests (optional)
    # This step is optional and assumes you have a test setup.
    # It's a placeholder for running your test suite with monkeydo.
    run: monkeydo -t

  - name: Create release artifact
    # This step packages your app into a .prg file for release.
    # The output path can be customized based on your needs.
    run: monkeyc -f source/buzz.jungle -o bin/buzzclock.prg -y buzz.der
